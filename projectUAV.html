<!DOCTYPE html>
<html>

<head>

    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">

    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

    <link rel="stylesheet" href="css/styles.css">

</head>

<body>

    <input type="file" id="file">

    <div id="map"></div>

    <p id="demo"></p>

    <script>
        var testus;

        var map = L.map('map').setView([47.486153, 8.206813], 15);
        var Esri_WorldTopoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
        }).addTo(map);

        var popup = L.popup();

        function onMapClick(e) {

            var xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    var myObj = JSON.parse(this.responseText);
                    testus = myObj.results[0].elevation;
                    popup.setLatLng(e.latlng)
                    popup.setContent("X: " + e.latlng.lat + " Y: " + e.latlng.lng + " Alt: " + testus)
                    popup.openOn(map);
                }
            };

            xmlhttp.open("GET", "https://api.opentopodata.org/v1/eudem25m?locations=" + e.latlng.lat + "," + e.latlng.lng, true);
            xmlhttp.send();

        }

        map.on('click', onMapClick);

    </script>

</body>

</html>
